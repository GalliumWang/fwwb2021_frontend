// lineData & stops come from geojson files
// downloaded from NYC's Open Data project.


stationNames={
  1: [
    'Sta1',
    'Sta159',
    'Sta108',
    'Sta83',
    'Sta107',
    'Sta154',
    'Sta150',
    'Sta64',
    'Sta89',
    'Sta80',
    'Sta97',
    'Sta110',
    'Sta106',
    'Sta34',
    'Sta128',
    'Sta74',
    'Sta149',
    'Sta49',
    'Sta65',
    'Sta200'
  ],
  2: [
    'Sta9',
    'Sta163',
    'Sta53',
    'Sta78',
    'Sta79',
    'Sta18',
    'Sta123',
    'Sta127',
    'Sta81',
    'Sta27',
    'Sta48',
    'Sta151',
    'Sta68',
    'Sta52',
    'Sta76',
    'Sta57',
    'Sta71',
    'Sta139',
    'Sta24',
    'Sta105',
    'Sta51',
    'Sta129',
    'Sta47'
  ],
  3: [
    'Sta143',
    'Sta156',
    'Sta61',
    'Sta50',
    'Sta119',
    'Sta66',
    'Sta12',
    'Sta161',
    'Sta21',
    'Sta133',
    'Sta22',
    'Sta138',
    'Sta41',
    'Sta30',
    'Sta67',
    'Sta144',
    'Sta29',
    'Sta126',
    'Sta40',
    'Sta131',
    'Sta39',
    'Sta100',
    'Sta167',
    'Sta113',
    'Sta141',
    'Sta142',
    'Sta158',
    'Sta44',
    'Sta117',
    'Sta147',
    'Sta42',
    'Sta35',
    'Sta109',
    'Sta33',
    'Sta112',
    'Sta153',
    'Sta125',
    'Sta121',
    'Sta11',
    'Sta201',
    'Sta202'
  ],
  10: [
    'Sta134',
    'Sta75',
    'Sta157',
    'Sta168',
    'Sta85',
    'Sta2',
    'Sta4',
    'Sta103',
    'Sta145',
    'Sta88',
    'Sta94',
    'Sta160',
    'Sta7',
    'Sta6',
    'Sta8',
    'Sta102',
    'Sta114',
    'Sta135',
    'Sta87'
  ],
  4: [
    'Sta59',
    'Sta19',
    'Sta62',
    'Sta165',
    'Sta58',
    'Sta38',
    'Sta84'
  ],
  5: [
    'Sta43',
    'Sta10',
    'Sta96',
    'Sta132',
    'Sta37',
    'Sta16',
    'Sta69',
    'Sta54'
  ],
  11: [
    'Sta120',
    'Sta130',
    'Sta146',
    'Sta25',
    'Sta3',
    'Sta46',
    'Sta86',
    'Sta15',
    'Sta162',
    'Sta118',
    'Sta20',
    'Sta55',
    'Sta70',
    'Sta13',
    'Sta140',
    'Sta77',
    'Sta122',
    'Sta36',
    'Sta166',
    'Sta99',
    'Sta124',
    'Sta28',
    'Sta82',
    'Sta164',
    'Sta152',
    'Sta45',
    'Sta23',
    'Sta56',
    'Sta115',
    'Sta63',
    'Sta111'
  ],
  12: [
    'Sta136',
    'Sta137',
    'Sta101',
    'Sta17',
    'Sta26',
    'Sta90',
    'Sta95',
    'Sta93',
    'Sta92',
    'Sta32',
    'Sta91',
    'Sta31',
    'Sta72',
    'Sta116',
    'Sta60',
    'Sta148',
    'Sta73',
    'Sta203'
  ]
}

var lineGeoData1=[
  [120.120012,30.383796]
  ,[120.135247,30.380805]
  ,[120.151919,30.378313]
  ,[120.176353,30.380307]
  ,[120.197338,30.396257]
  ,[120.219759,30.416191]
  ,[120.268627,30.415444]
  ,[120.286162,30.403733]
  ,[120.276964,30.393267]
  ,[120.272364,30.380805]
  ,[120.255404,30.36909]
  ,[120.245631,30.357872]
  ,[120.238732,30.348398]
  ,[120.224071,30.335183]
  ,[120.206824,30.32446]
  ,[120.182102,30.32471]
  ,[120.160543,30.332191]
  ,[120.124611,30.343162]
  ,[120.101902,30.349645]
  ,[120.09874,30.367595]
];
var lineGeoData2=[[120.199997,30.263419],[120.212932,30.251752],[120.204452,30.236589],[120.243618,30.239397],[120.219903,30.261921],[120.214441,30.281758],[120.214082,30.292798],[120.215879,30.309698],[120.208189,30.331302],[120.189001,30.344019],[120.176371,30.347929],[120.1588,30.351607],[120.144086,30.354396],[120.12073,30.360006],[120.090332,30.364618],[120.071791,30.382502],[120.060401,30.387767],[120.042794,30.398171],[120.019869,30.411938],[119.996442,30.43162],[119.967552,30.419725]];
var lineGeoData3=[[120.191373,30.307625],[120.18548,30.301514],[120.177216,30.293095],[120.16773,30.286047],[120.162196,30.282117],[120.162196,30.274632],[120.165789,30.271638],[120.176569,30.266585],[120.186558,30.260409],[120.190008,30.252111],[120.185265,30.244998],[120.181887,30.239444],[120.18045,30.235263],[120.180737,30.228648],[120.188786,30.225278],[120.195541,30.227837],[120.206033,30.231581],[120.21861,30.185733],[120.252386,30.23155],[120.262878,30.216072],[120.259572,30.203713],[120.21958,30.189104],[120.210669,30.194723],[120.205494,30.196097],[120.19802,30.19335],[120.19184,30.19335],[120.180198,30.191227],[120.158208,30.187106],[120.153752,30.17899],[120.158639,30.170372],[120.169275,30.169123],[120.177467,30.16675],[120.187959,30.169248],[120.198308,30.166875],[120.217568,30.16138],[120.223029,30.148514],[120.225185,30.135521],[120.225616,30.1269],[120.229928,30.115655],[120.212537,30.107407],[120.194283,30.107282]];
var lineGeoData4=[
  [
    120.176524,
    30.192542
  ],
  [
   120.211486,
   30.208898
  ],
  [
    120.230745,
    30.219103
  ],
  [
    120.238866,
    30.229276
  ],
  [
    120.239153,
    30.229307
  ],
  [
    120.243286,
    30.239261
  ],
  [
    120.250328,
    30.247217
  ]
];

var lineGeoData5=[[120.187205,30.136084],[120.191768,30.143611],[120.213399,30.161755],[120.237078,30.189823],[120.237186,30.18976],[120.226963,30.193382],[120.224197,30.205742],[120.224197,30.205742]];
var lineGeoData10=[
  [
    120.223774,30.20612
  ]
  ,
  [
     120.218744,30.187891
   ]
   ,
   [
     120.217882,30.182334
   ],[
     120.209761,30.181585
   ],[
     120.197041,30.182834
   ],[
     120.189136,30.183083
   ],[
     120.174404,30.183583
   ],[
     120.17426,30.17353
   ],[
     120.178572,30.165225
   ],[
     120.181734,30.16435
   ],[
     120.184968,30.163788
   ],[
     120.184968,30.163788
   ],[
     120.190142,30.161915
   ],[
     120.187555,30.154982
   ],[
     120.188489,30.149923
   ],[
     120.194885,30.152484
   ],[
     120.200993,30.155794
   ],[
     120.206527,30.159854
   ],[
     120.206527,30.159854
   ]
];
var lineGeoData11=[
  // dist10  7-stations
  [
      120.130134,30.182387
  ],
  [
      120.142638,30.17708
  ],
  [
      120.155789,30.183636
  ],
  [
      120.166425,30.187507
  ],
  [
      120.175193,30.19119
  ],
  [
      120.17972,30.186883
  ],
  [
      120.181445,30.176393
  ],
  //dist5  11-stations
  [
      120.180151,30.169275
  ],
  [
      120.180439,30.159783
  ],
  [
      120.180008,30.147043
  ],
  [
      120.190787,30.142171
  ],
  [
      120.208322,30.152539
  ],
  [
      120.227438,30.16428
  ],
  [
      120.23908,30.154288
  ],
  [
      120.248854,30.149666
  ],
  [
      120.246698,30.124805
  ],
  [
      120.225426,30.11231
  ],
  [
      120.195818,30.094939
  ],
  // dist8  3-stations
  [
      120.175624,30.062001
  ],
  [
      120.165894,30.113621
  ],
  [
      120.113389,30.11937
  ],
  // dist1  1-stations
  [
      120.093925,30.148857
  ],
  // dist6  5-stations
  [
      120.084931,30.159846
  ],
  [
      120.09413,30.16709
  ],
  [
      120.102178,30.176331
  ],
  [
      120.103903,30.165341
  ],
  [
      120.098154,30.155349
  ],
  // dist1  1-station
  [
      120.101029,30.144357
  ],
  // dist5  1-station
  [
      120.124025,30.136612
  ]
];

var lineGeoData12=[
  // dist2  4-stations
  [
      120.169156,30.351003
  ],
  [
      120.133511,30.357484
  ],
  [
      120.067971,30.353994
  ],
  [
      120.033476,30.343772
  ],

  // dist6  4-stations
  [
      120.034626,30.31335
  ],
  [
      120.080906,30.293895
  ],
  [
      120.14501,30.269445
  ],
  [
      120.175768,30.235755
  ],

  // dist8  1-stations
  [
      120.196177,30.227892
  ],

  // dist6  2-stations
  [
      120.188128,30.225146
  ],
  [
      120.173755,30.21516
  ],

  // dist5  3-stations
  [
      120.180654,30.199431
  ],
  [
      120.196608,30.181701
  ],
  [
      120.203651,30.203675
  ],

  // dist8  2-stations
  [
      120.238433,30.229639
  ],
  [
      120.286726,30.266825
  ],

  // dist3  2-stations
  [
      120.288882,30.312976
  ],
  [
      120.309292,30.3606
  ]
];

var lineDataTemplate={
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "name": "1",
        "url": "http://web.mta.info/nyct/service/",
        "rt_symbol": "1",
        "objectid": "753",
        "id": "2000393",
        "shape_len": "2438.20024902"
      },
      "geometry": {
        "type": "LineString",
        "coordinates": [
        ]
      }
    }
  ]
};


function lineDataFactory(name,symbol,geoData){
  var template=JSON.parse(JSON.stringify(lineDataTemplate));
  template.features[0].geometry.coordinates=JSON.parse(JSON.stringify(geoData));
  template.features[0].properties.name=name;
  template.features[0].properties.rt_symbol=symbol;
  return template;
}

var lineData1=lineDataFactory("1","1",lineGeoData1);
var lineData2=lineDataFactory("2","4",lineGeoData2);
var lineData3=lineDataFactory("3","7",lineGeoData3);
var lineData4=lineDataFactory("4","A",lineGeoData4);
var lineData5=lineDataFactory("5","B",lineGeoData5);
var lineData10=lineDataFactory("10","G",lineGeoData10);
var lineData11=lineDataFactory("11","J",lineGeoData11);
var lineData12=lineDataFactory("12","L",lineGeoData12);
  

  var stopsTemplate={
    "type": "FeatureCollection",
    "features": []
  };
  var stopTemplate={
    "type": "Feature",
    "properties": {
      "name": "Astor Pl",
      "line": "4-6-6 Express",
      "url": "http://web.mta.info/nyct/service/",
      "objectid": "1",
      "notes": "4 nights, 6-all times, 6 Express-weekdays AM southbound, PM northbound"
    },
    "geometry": {
      "type": "Point",
      "coordinates":[]
    }
  }

  function stopsFactory(geoData,stationId){
    var stopsObj=JSON.parse(JSON.stringify(stopsTemplate));
    var stopCount=0;

    for(corData of geoData){
      stopObj=JSON.parse(JSON.stringify(stopTemplate));
      stopObj.properties.line="route"+stationId;
      stopObj.properties.name=stationNames[stationId][stopCount];   // set station name
      stopObj.geometry.coordinates=corData;
      stopsObj.features.push(stopObj);
      stopCount++;
    }
    
    return stopsObj;
  }

  var stops1=stopsFactory(lineGeoData1,"1");
  var stops2=stopsFactory(lineGeoData2,"2");
  var stops3=stopsFactory(lineGeoData3,"3");
  var stops4=stopsFactory(lineGeoData4,"4");
  var stops5=stopsFactory(lineGeoData5,"5");
  var stops10=stopsFactory(lineGeoData10,"10");
  var stops11=stopsFactory(lineGeoData11,"11");
  var stops12=stopsFactory(lineGeoData12,"12");

  district_data={
    "features": [
      {
        "properties": {
          "fill": "#bf4040",
          "fillOpacity": 0.33,
          "fill-opacity": 0.33,
          "fillColor": "#bf4040",
          "color": "#bf4040",
          "contour": 10,
          "opacity": 0.33,
          "metric": "time"
        },
        "geometry": {
          "coordinates": [
            [
                [
                120.186821,
                30.177019
                ],
                [
                120.077044,
                30.165170
                ],
                [
                120.029270,
                30.276740
                ],
                [
                120.108878,
                30.329645
                ],
                [
                120.151193,
                30.330026
                ],
                [
                120.186821,
                30.167019
                ]
            ]
          ],
          "type": "Polygon"
        },
        "type": "Feature"
      }
    ],
    "type": "FeatureCollection"
  }

  //TODO

  route_total_info={
    1:{
      "station_num":20,
      "station_location":[
        [120.120012,30.383796]
        ,[120.135247,30.380805]
        ,[120.151919,30.378313]
        ,[120.176353,30.380307]
        ,[120.197338,30.396257]
        ,[120.219759,30.416191]
        ,[120.268627,30.415444]
        ,[120.286162,30.403733]
        ,[120.276964,30.393267]
        ,[120.272364,30.380805]
        ,[120.255404,30.36909]
        ,[120.245631,30.357872]
        ,[120.238732,30.348398]
        ,[120.224071,30.335183]
        ,[120.206824,30.32446]
        ,[120.182102,30.32471]
        ,[120.160543,30.332191]
        ,[120.124611,30.343162]
        ,[120.101902,30.349645]
        ,[120.09874,30.367595]
      ]
    },
    2:{
      "station_num":21,
      "station_location":[[120.199997,30.263419],[120.212932,30.251752],[120.204452,30.236589],[120.243618,30.239397],[120.219903,30.261921],[120.214441,30.281758],[120.214082,30.292798],[120.215879,30.309698],[120.208189,30.331302],[120.189001,30.344019],[120.176371,30.347929],[120.1588,30.351607],[120.144086,30.354396],[120.12073,30.360006],[120.090332,30.364618],[120.071791,30.382502],[120.060401,30.387767],[120.042794,30.398171],[120.019869,30.411938],[119.996442,30.43162],[119.967552,30.419725]]
    },
    3:{
      "station_num":41,
      "station_location":[[120.191373,30.307625],[120.18548,30.301514],[120.177216,30.293095],[120.16773,30.286047],[120.162196,30.282117],[120.162196,30.274632],[120.165789,30.271638],[120.176569,30.266585],[120.186558,30.260409],[120.190008,30.252111],[120.185265,30.244998],[120.181887,30.239444],[120.18045,30.235263],[120.180737,30.228648],[120.188786,30.225278],[120.195541,30.227837],[120.206033,30.231581],[120.21861,30.185733],[120.252386,30.23155],[120.262878,30.216072],[120.259572,30.203713],[120.21958,30.189104],[120.210669,30.194723],[120.205494,30.196097],[120.19802,30.19335],[120.19184,30.19335],[120.180198,30.191227],[120.158208,30.187106],[120.153752,30.17899],[120.158639,30.170372],[120.169275,30.169123],[120.177467,30.16675],[120.187959,30.169248],[120.198308,30.166875],[120.217568,30.16138],[120.223029,30.148514],[120.225185,30.135521],[120.225616,30.1269],[120.229928,30.115655],[120.212537,30.107407],[120.194283,30.107282]]
    },
    4:{
      "station_num":7,
      "station_location":[
        [
          120.176524,
          30.192542
        ],
        [
         120.211486,
         30.208898
        ],
        [
          120.230745,
          30.219103
        ],
        [
          120.238866,
          30.229276
        ],
        [
          120.239153,
          30.229307
        ],
        [
          120.243286,
          30.239261
        ],
        [
          120.250328,
          30.247217
        ]
      ]
    },
    5:{
      "station_num":8,
      "station_location":[[120.187205,30.136084],[120.191768,30.143611],[120.213399,30.161755],[120.237078,30.189823],[120.237186,30.18976],[120.226963,30.193382],[120.224197,30.205742],[120.224197,30.205742]]
    },
    10:{
      "station_num":19,
      "station_location":[
        [
          120.223774,30.20612
        ]
        ,
        [
           120.218744,30.187891
         ]
         ,
         [
           120.217882,30.182334
         ],[
           120.209761,30.181585
         ],[
           120.197041,30.182834
         ],[
           120.189136,30.183083
         ],[
           120.174404,30.183583
         ],[
           120.17426,30.17353
         ],[
           120.178572,30.165225
         ],[
           120.181734,30.16435
         ],[
           120.184968,30.163788
         ],[
           120.184968,30.163788
         ],[
           120.190142,30.161915
         ],[
           120.187555,30.154982
         ],[
           120.188489,30.149923
         ],[
           120.194885,30.152484
         ],[
           120.200993,30.155794
         ],[
           120.206527,30.159854
         ],[
           120.206527,30.159854
         ]
      ]
    },
    11:{
      "station_num":29,
      "station_location":[
        // dist10  7-stations
        [
            120.130134,30.182387
        ],
        [
            120.142638,30.17708
        ],
        [
            120.155789,30.183636
        ],
        [
            120.166425,30.187507
        ],
        [
            120.175193,30.19119
        ],
        [
            120.17972,30.186883
        ],
        [
            120.181445,30.176393
        ],
        //dist5  11-stations
        [
            120.180151,30.169275
        ],
        [
            120.180439,30.159783
        ],
        [
            120.180008,30.147043
        ],
        [
            120.190787,30.142171
        ],
        [
            120.208322,30.152539
        ],
        [
            120.227438,30.16428
        ],
        [
            120.23908,30.154288
        ],
        [
            120.248854,30.149666
        ],
        [
            120.246698,30.124805
        ],
        [
            120.225426,30.11231
        ],
        [
            120.195818,30.094939
        ],
        // dist8  3-stations
        [
            120.175624,30.062001
        ],
        [
            120.165894,30.113621
        ],
        [
            120.113389,30.11937
        ],
        // dist1  1-stations
        [
            120.093925,30.148857
        ],
        // dist6  5-stations
        [
            120.084931,30.159846
        ],
        [
            120.09413,30.16709
        ],
        [
            120.102178,30.176331
        ],
        [
            120.103903,30.165341
        ],
        [
            120.098154,30.155349
        ],
        // dist1  1-station
        [
            120.101029,30.144357
        ],
        // dist5  1-station
        [
            120.124025,30.136612
        ]
      ]
    },
    12:{
      "station_num":18,
      "station_location":[
        // dist2  4-stations
        [
            120.169156,30.351003
        ],
        [
            120.133511,30.357484
        ],
        [
            120.067971,30.353994
        ],
        [
            120.033476,30.343772
        ],
      
        // dist6  4-stations
        [
            120.034626,30.31335
        ],
        [
            120.080906,30.293895
        ],
        [
            120.14501,30.269445
        ],
        [
            120.175768,30.235755
        ],
      
        // dist8  1-stations
        [
            120.196177,30.227892
        ],
      
        // dist6  2-stations
        [
            120.188128,30.225146
        ],
        [
            120.173755,30.21516
        ],
      
        // dist5  3-stations
        [
            120.180654,30.199431
        ],
        [
            120.196608,30.181701
        ],
        [
            120.203651,30.203675
        ],
      
        // dist8  2-stations
        [
            120.238433,30.229639
        ],
        [
            120.286726,30.266825
        ],
      
        // dist3  2-stations
        [
            120.288882,30.312976
        ],
        [
            120.309292,30.3606
        ]
      ]
    }
  }